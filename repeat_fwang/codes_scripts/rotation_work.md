# Everything is inside "/home/wang9418/Tripsacum"

# Important locations inside "/home/wang9418/Tripsacum":
Data are located in folders that start with "repeat", for example "repeat/" or "repeat_filtered/".
ALL CODES and SCRIPTS used in this rotation are in "codes_scripts/" folder. Some of these scripts are for me to practice and not very important. The important scripts will be talked about in the Procedure section below. 
"plots/" stores the plots generated in this rotation projects. Currently it only contains plots from the filtering process. 

# Important items inside "/home/wang9418/Tripsacum":
Submitted jobs that end with "_job.sh", for example, "sort_job.sh". 
The results generated by these jobs are stored in "outfile_{wildcard}.out". 
The errors generated are in "outfile_{wildcard}.err". 
"steps_1.txt" stores the number of sequences/lines after each step

# Procedure:
Original unfiltered repeats are copied from "/group/jrigrp10/tripsacum_dact/data/repeat_abundance/bed_files/repeat/" and stored in "repeat/".

### Filtering:
Script: "codes_scripts/filter.R".
Method: filter all categories with "< 0.01 e_value" and filter mitochondira and chloroplast with "> 10kb alignment_length", filter brepeats with "> 100pb alignment_length", filter telomere with "> 90% ratio between alignment and query length", and filter the rest of the categories with "> 80% ratio between alignment and query length". 
"filter.RData" is the saved R workspace image in this step. 
Input data: "repeat/"
Resulting data: "repeat_filtered/". 

### Sorting: 
Script: "sort_job.sh" and "codes_scripts/sort_job.sh" are the same script at different locations. 
Input data: "repeat_filtered/".
Resulting data: "repeat_sorted/".

### Intersections:
Script: "intersect_job.sh" and "codes_scripts/intersect_job.sh" are the same script at different locations. 
Method: check if any sequences from different categories are overlapping with each other. If they overlap, we don't really know which category they belong to. So these overlapping sequences will be removed in the Non-overlapping section below.
Input data: "repeat_sorted/".
Resulting data: "repeat_intersect/". 

### Non-overlapping: 
Script: "nonoverlap_job.sh" and "codes_scripts/nonoverlap_job.sh" are the same script at different locations. 
Method: the overlapping sequences from different categories are removed in this step.
Input data: "repeat_sorted/".
Resulting data: "repeat_nonoverlapping/". 

### Note about Intersections and Non-overlapping sections:
This two steps need to loop over the 10 categories, and each category is laid against the rest 9 categories. Selecting the rest of the 9 categories written in "loop_file.sh", and this script is used in "intersect_job.sh" and "nonoverlap_job.sh". 

### Merging: 
Script: "merge_job.sh" and "codes_scripts/merge_job.sh" are the same script at different locations. 
Method: if a region in one category is sequence multiple times, or if two or more sequences are closely located, this step merges them as one long sequence. 
Input data: "repeat_nonoverlapping/".
Resulting data: "repeat_merge/". 

# my email in case you have any problems:
faywang@ucdavis.edu